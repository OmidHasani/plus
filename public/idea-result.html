<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ุชุญูู ุญุฑููโุง ุงุฏู</title>
  <style>
    body {
      font-family: 'Vazirmatn', sans-serif;
      background: #f4f6f9;
      max-width: 950px;
      margin: 40px auto;
      padding: 20px;
      color: #333;
      line-height: 1.9;
    }
    h1 {
      text-align: center;
      border-bottom: 3px solid #3498db;
      padding-bottom: 10px;
      margin-bottom: 30px;
      color: #2c3e50;
    }
    .section {
      background: #fff;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    }
    .section h2 {
      color: #0057a3;
      font-size: 20px;
      margin-bottom: 15px;
    }
    .section h3 {
      color: #1f3b73;
      font-size: 18px;
      margin: 20px 0 10px;
    }
    .analysis-text {
      font-size: 16px;
      color: #444;
      margin-bottom: 15px;
    }
    .impact-list {
      list-style-type: disc;
      padding-right: 20px;
      font-size: 16px;
      color: #333;
    }
    .btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-weight: bold;
      margin: 10px 5px 0 0;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn:hover { background: #217dbb; }
  </style>
</head>
<body>

<h1>ุชุญูู ุญุฑููโุง ุงุฏู ููฺฉุงุฑ</h1>

<div class="section">
  <h2>ฺุฑุง ุจุงุฏ ุงู ุงุฏู ุฑุง ุงุฒ ุฒุงูู CSRุ PR ู Branding ุจุฑุฑุณ ฺฉุฑุฏุ</h2>
  <div id="analysis" class="analysis-text">โณ ุฏุฑ ุญุงู ุฏุฑุงูุช ุชุญูู...</div>
</div>

<div class="section">
  <h2>ุงุชูุงูุงุช ู ุฏุณุชุงูุฑุฏูุง ุงู ููฺฉุงุฑ ุจุฑุง ุฏู ุจุฑูุฏ</h2>
  <div id="impactList">
    <h3>ูุณุฆููุช ุงุฌุชูุงุน (CSR)</h3>
    <ul id="csrList" class="impact-list"></ul>
    <h3>ุฑูุงุจุท ุนููู (PR)</h3>
    <ul id="prList" class="impact-list"></ul>
    <h3>ุจุฑูุฏุณุงุฒ (Branding)</h3>
    <ul id="brandingList" class="impact-list"></ul>
  </div>
</div>

<div class="section">
  <h2> ุงุณุชุฑุงุชฺ </h2>
  <div id="strategy" class="analysis-text">ุจุฑุง ุฏุฑุงูุช ุงุณุชุฑุงุชฺุ ุฑู ุฏฺฉูู "ฺฉ ุงุณุชุฑุงุชฺ ูโุฎูุงูู" ฺฉูฺฉ ฺฉูุฏ.</div>
</div>

<div style="margin-top:20px;">
  <button class="btn" id="btnEconomy">๐ฐ ุชูุฌู ุงูุชุตุงุฏ</button>
  <button class="btn" id="btnSample">๐ ูููููโูุง ุงุฌุฑุง ุดุฏู</button>
  <button class="btn" id="btnStrategy">๐ ฺฉ ุงุณุชุฑุงุชฺ ูโุฎูุงูู</button>
</div>

<script>
async function callOpenAI(prompt) {
  const res = await fetch("/api/generate-ideas", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ prompt })
  });
  if (!res.ok) throw new Error("ุฎุทุง ุฏุฑ API");
  const data = await res.json();
  return data.choices[0].message.content;
}

function splitAnalysisAndImpacts(text) {
  const parts = text.split(/CSR:|PR:|Branding:/);
  const analysis = parts[0].trim();
  const csr = parts[1] ? parts[1].split("\n").filter(l => l.trim()) : [];
  const pr = parts[2] ? parts[2].split("\n").filter(l => l.trim()) : [];
  const branding = parts[3] ? parts[3].split("\n").filter(l => l.trim()) : [];
  return { analysis, csr, pr, branding };
}

async function loadIdeaAnalysis() {
  const ideaPrompt = sessionStorage.getItem("ideaPrompt");
  const analysisDiv = document.getElementById("analysis");
  const csrList = document.getElementById("csrList");
  const prList = document.getElementById("prList");
  const brandingList = document.getElementById("brandingList");

  try {
    const newPrompt = `
ุจุฑ ุงุณุงุณ ุงุทูุงุนุงุช ุฒุฑ:
${ideaPrompt}

ุฎุฑูุฌ ุญุฑููโุง ู ฺฉุงูู ุจุฏู ู ููุท ุงู ุฏู ุจุฎุด ุฑุง ุจููุณ:

1. **ฺฉ ุชุญูู ุบู ู ูพุฑูุญุชูุง (ดโต ุฎุท)** ฺฉู ุชูุถุญ ุฏูุฏ ฺุฑุง ุงู ุงุฏู ุจุงุฏ ุงุฒ ุฒุงููโูุง ูุณุฆููุช ุงุฌุชูุงุน (CSR)ุ ุฑูุงุจุท ุนููู (PR) ู ุจุฑูุฏุณุงุฒ (Branding) ุจุฑุฑุณ ุดูุฏ. ุงู ุจุฎุด ุจุงุฏ ุนูู ู ูุชูุงุนุฏฺฉููุฏู ุจุงุดุฏ.

2. ุณูพุณ ุณู ูุณุช ูุฌุฒุง ู ุจุณุงุฑ ููุตู:
- **CSR:** ุชูุงู ุงุชูุงูุงุช ู ุฏุณุชุงูุฑุฏูุง ฺฉู ุงุฒ ููุธุฑ ูุณุฆููุช ุงุฌุชูุงุน ุจุฑุง ุฏู ุจุฑูุฏ ุฑุฎ ูโุฏูุฏ (ุญุฏุงูู ตโท ููุฑุฏ ุฏูู ู ูุงูุน).
- **PR:** ุชูุงู ุงุชูุงูุงุช ู ุฏุณุชุงูุฑุฏูุง ฺฉู ุงุฒ ููุธุฑ ุฑูุงุจุท ุนููู ุจุฑุง ุฏู ุจุฑูุฏ ุฑุฎ ูโุฏูุฏ (ุญุฏุงูู ตโท ููุฑุฏ ุฏูู ู ูุงูุน).
- **Branding:** ุชูุงู ุงุชูุงูุงุช ู ุฏุณุชุงูุฑุฏูุง ฺฉู ุงุฒ ููุธุฑ ุจุฑูุฏุณุงุฒ ุจุฑุง ุฏู ุจุฑูุฏ ุฑุฎ ูโุฏูุฏ (ุญุฏุงูู ตโท ููุฑุฏ ุฏูู ู ูุงูุน).

ูฺ ููุฏูู ุง ูุชุฌูโฺฏุฑ ุงุถุงูู ูููุณ. ุฎุฑูุฌ ููุท ููู ุฏู ุจุฎุด ุจุงุดุฏ.
`;

    analysisDiv.textContent = "โณ ุฏุฑ ุญุงู ุชุญูู...";
    const response = await callOpenAI(newPrompt);
    const { analysis, csr, pr, branding } = splitAnalysisAndImpacts(response);

    analysisDiv.innerHTML = analysis.replace(/\n/g, "<br>");
    csrList.innerHTML = csr.map(i => `<li>${i.replace(/^[-*โข]\s*/, '')}</li>`).join("");
    prList.innerHTML = pr.map(i => `<li>${i.replace(/^[-*โข]\s*/, '')}</li>`).join("");
    brandingList.innerHTML = branding.map(i => `<li>${i.replace(/^[-*โข]\s*/, '')}</li>`).join("");
  } catch (err) {
    analysisDiv.textContent = "โ ุฎุทุง: " + err.message;
  }
}

document.getElementById("btnEconomy").addEventListener("click", async () => {
  const ideaPrompt = sessionStorage.getItem("ideaPrompt");
  const analysisDiv = document.getElementById("analysis");
  analysisDiv.textContent = "โณ ุฏุฑ ุญุงู ุชุญูู ุงูุชุตุงุฏ...";
  const response = await callOpenAI(ideaPrompt + "\n\nูุทูุงู ุชูุฌู ุงูุชุตุงุฏ ฺฉุงูู ุงู ุงุฏู ุฑุง ุชุญูู ฺฉู.");
  analysisDiv.innerHTML = response.replace(/\n/g, "<br>");
});

document.getElementById("btnSample").addEventListener("click", async () => {
  const ideaPrompt = sessionStorage.getItem("ideaPrompt");
  const analysisDiv = document.getElementById("analysis");
  analysisDiv.textContent = "โณ ุฏุฑ ุญุงู ุฌุณุชุฌู ูููููโูุง ูุดุงุจู...";
  const response = await callOpenAI(ideaPrompt + "\n\nูููููโูุง ูุงูุน ูุดุงุจู ุงู ุงุฏู ุฑุง ุฏุฑ ุงุฑุงู ุง ุฌูุงู ูุนุฑู ฺฉู ู ูุชุงุฌุดุงู ุฑุง ุชูุถุญ ุจุฏู.");
  analysisDiv.innerHTML = response.replace(/\n/g, "<br>");
});

document.getElementById("btnStrategy").addEventListener("click", async () => {
  const ideaPrompt = sessionStorage.getItem("ideaPrompt");
  const strategyDiv = document.getElementById("strategy");
  strategyDiv.textContent = "โณ ุฏุฑ ุญุงู ุทุฑุงุญ ุงุณุชุฑุงุชฺ...";
  const strategyPrompt = `
ุดูุง ุฏุฑ ููุด ฺฉ **ูุฏุฑ ุจุงุฒุงุฑุงุจ ุงุฑุดุฏ (CMO)** ู **ุชูุณุนูโุฏููุฏู ุญุฑููโุง ฺฉุณุจโูฺฉุงุฑ (Business Developer)** ูุณุชุฏ.  
ูโุฎูุงูู ุจุฑ ุงุณุงุณ ุงุฏู ุฒุฑ ฺฉ **ุงุณุชุฑุงุชฺ ฺฉุงููุงู ุงุฌุฑุง ู ูููโุฌุฒุฆ** ุทุฑุงุญ ฺฉูุฏ ฺฉู ุจุชูุงู ุขู ุฑุง ูุณุชููุงู ุจู ุชูโูุง ุนููุงุช ู ูุฏุฑุงู ุงุฑุงุฆู ุฏุงุฏ ู ุงุฌุฑุง ฺฉุฑุฏ:  

[ุงุฏู]  
${ideaPrompt}  

**ุฎุฑูุฌ ุดูุง ุจุงุฏ ุดุงูู ุงู ุจุฎุดโูุง ุจุงุดุฏ ู ูุฑ ุจุฎุด ุจุง ุจุดุชุฑู ุฌุฒุฆุงุช ููฺฉู ููุดุชู ุดูุฏ:**

1. **ุจุงุฒููุณ ฺฉุงูู ู ุดูุงู ุงุฏู:**  
   - ุงุฏู ุฑุง ุจุง ุจุงู ฺฉุงููโุชุฑ ู ุฌุฒุฆโุชุฑ ุจุงุฒููุณ ฺฉูุฏ.  
   - ููู ุงุจุนุงุฏ ุงุฏูุ ุดุงูู ูุฏูุ ุฑูุด ุงุฌุฑุงุ ุงุฌุฒุง ฺฉูุฏ ู ุงุฑุฒุด ูพุดููุงุฏ ุฑุง ุชูุถุญ ุฏูุฏ.  
   - ุงู ุจุฎุด ุจุงุฏ ุทูุฑ ููุดุชู ุดูุฏ ฺฉู ูฺ ุงุจูุงู ุจุฑุง ุชูโูุง ุงุฌุฑุง ุจุงู ููุงูุฏ.  

2. **ุงุณุชุฑุงุชฺ ุงุฌุฑุง ุงุฏู (ุจุฎุด ุงุตู):**  
   - ฺฏุงูโุจูโฺฏุงู ู ุจู ุชุฑุชุจ ููุทู ุชูุถุญ ุฏูุฏ ฺฉู ุจุฑุง ุงุฌุฑุง ุงู ุงุฏู ฺู ุงูุฏุงูุงุช ุจุงุฏ ุงูุฌุงู ุดูุฏ.  
   - ุจุฑุง **ูุฑ ฺฏุงู** ุจู ุทูุฑ ุฏูู ูุดุฎุต ฺฉูุฏ:  
     - **ฺู ูุนุงูุช ุงูุฌุงู ูโุดูุฏุ**  
     - **ฺู ฺฉุณ (ฺฉุฏุงู ุจุฎุด ุง ุชู) ูุณุฆูู ุงูุฌุงู ุขู ุงุณุชุ**  
     - **ุงู ูุฑุญูู ฺุทูุฑ ุจุงุฏ ุงูุฌุงู ุดูุฏุ (ูุฑุขูุฏ ุงุฌุฑุง ุฌุฒุฆ)**  
     - **ฺู ููุงุจุน (ูุงูุ ุงูุณุงูุ ูู) ูุงุฒู ุงุณุชุ**  
     - **ูพุดโูุงุฒูุง ูุฑ ูุฑุญูู ฺุณุชุ**  
     - **ฺู ุฎุฑูุฌ ูุดุฎุต ุจุงุฏ ุฏุฑ ูพุงุงู ุงู ฺฏุงู ุจู ุฏุณุช ุขุฏุ**  
   - ูฺ ฺุฒ ุฑุง ุจูโุตูุฑุช ฺฉู ูููุณุฏุ ูุฑ ูุฑุญูู ุจุงุฏ ูุซู ฺฉ ุฏุณุชูุฑุงูุนูู ุนููุงุช ุฏูู ุจุงุดุฏ.  

3. **ุจุฑูุงููโุฑุฒ ููุงุจุน ู ุชูุณู ููุดโูุง:**  
   - ูุธุงู ุฏูู ูุฑ ุจุฑูุฏ ุฑุง ุจู ุชูฺฉฺฉ ุจููุณุฏ (ฺฉุฏุงู ุจุฎุด ฺู ูุณุฆููุช ุฏุงุฑุฏ).  
   - ููุงุจุน ููุฑุฏูุงุฒ (ูุงูุ ุงูุณุงูุ ุชฺฉููููฺฺฉ) ุฑุง ุจู ุชูฺฉฺฉ ูุฑ ูุฑุญูู ูุณุช ฺฉูุฏ.  
   - ุงฺฏุฑ ูุงุฒ ุจู ููฺฉุงุฑ ุจุง ูพูุงูฺฉุงุฑุงู ุง ุดุฑฺฉุง ุฎุงุฑุฌ ูุฌูุฏ ุฏุงุฑุฏุ ุขูโูุง ุฑุง ูุดุฎุต ฺฉูุฏ.  

4. **ุฑุณฺฉโูุง ู ุฑุงูฺฉุงุฑูุง:**  
   - ูููโุชุฑู ุฑุณฺฉโูุง ุงุญุชูุงู ุฏุฑ ุงุฌุฑุง ุงู ุงุฏู ุฑุง ููุฑุณุช ฺฉูุฏ.  
   - ุจุฑุง ูุฑ ุฑุณฺฉุ ฺฉ ุฑุงูฺฉุงุฑ ูุดุฎุต ู ุงุฌุฑุง ุงุฑุงุฆู ุฏูุฏ.  

5. **ูุชุฌูโฺฏุฑ ุงุฌุฑุง:**  
   - ุชูุถุญ ุฏูุฏ ูพุณ ุงุฒ ุงุฌุฑุง ุงู ุงุณุชุฑุงุชฺ ฺู ูุชุงุฌ ูุดุฎุต ุจู ุฏุณุช ุฎูุงูุฏ ุขูุฏ (ุงุฒ ูุธุฑ ูุฑูุดุ ุฌุงฺฏุงู ุจุฑูุฏุ ุชูุณุนู ุจุงุฒุงุฑ).  
   - ูุฒุชโูุง ุฑูุงุจุช ฺฉู ุงู ุงุฏู ุจุฑุง ุฏู ุจุฑูุฏ ุงุฌุงุฏ ูโฺฉูุฏ ุฑุง ุจูโุทูุฑ ุฏูู ุดุฑุญ ุฏูุฏ.  

**ูฺฉุงุช ฺฉูุฏ:**  
- **ูฺ ุชูุถุญ ฺฉู ู ูุจูู ูููุณุฏ.** ููู ฺุฒ ุจุงุฏ ุฏููุ ุนููุงุช ู ุจุง ุฐฺฉุฑ ุฌุฒุฆุงุช ฺฉุงูู ุจุงุดุฏ.  
- ูุญู ุดูุง ุจุงุฏ **ุญุฑููโุง ู ุงุฌุฑุง** ุจุงุดุฏุ ูุซู ฺฉ ุฑุงูููุง ุนููุงุช ฺฉู ุจู ุชูโูุง ุฏุงุฎู ุงุฑุงุฆู ูโุดูุฏ.  
- ุฎุฑูุฌ ุดูุง ุจุงุฏ ูุซู ฺฉ **Manual ฺฉุงูู ุงุฌุฑุง ูพุฑูฺู** ุจุงุดุฏ.  



  `;
  const response = await callOpenAI(strategyPrompt);
  strategyDiv.innerHTML = response.replace(/\n/g, "<br>");
});

window.onload = loadIdeaAnalysis;
</script>
</body>
</html>
